CREATE DATABASE company4_db;
USE company4_db;

CREATE TABLE employees (
    id INT AUTO_INCREMENT PRIMARY KEY,
    name VARCHAR(50),
    department VARCHAR(30),
    city VARCHAR(30),
    salary INT
);

INSERT INTO employees (name, department, city, salary) VALUES
('Amit', 'HR', 'Delhi', 45000),
('Anita', 'Finance', 'Mumbai', 55000),
('Alex', 'IT', 'Chennai', 60000),
('Bhavya', 'IT', 'Bangalore', 72000),
('Bobby', 'Sales', 'Mumbai', 38000),
('Chitra', 'HR', 'Delhi', 50000),
('David', 'Sales', 'Chennai', 30000);

SELECT name, salary
FROM employees
WHERE salary > (
    SELECT AVG(salary)
    FROM employees
);

SELECT name, salary
FROM employees
WHERE salary = (
    SELECT MAX(salary)
    FROM employees
);

SELECT name, department
FROM employees
WHERE department = (
    SELECT department 
    FROM employees 
    WHERE name = 'Alex'
);

SELECT e1.name, e1.department, e1.salary
FROM employees e1
WHERE e1.salary > (
    SELECT AVG(e2.salary)
    FROM employees e2
    WHERE e2.department = e1.department
);

SELECT e1.name, e1.department, e1.salary
FROM employees e1
WHERE e1.salary = (
    SELECT MAX(e2.salary)
    FROM employees e2
    WHERE e2.department = e1.department
);
